# ๐ง ุชูุฑูุฑ ุฅุตูุงุญ ุฎุทุฃ ุฅุถุงูุฉ ุงููุชุงุจ - ููุตุฉ ูุชุงุจู
**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 11 ุฃุบุณุทุณ 2025 - 9:40 PM  
**ุงููุดููุฉ**: ุฎุทุฃ ุฃุซูุงุก ุฅุถุงูุฉ ุงููุชุงุจ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ  
**ุงูุญุงูุฉ**: โ **ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ**

---

## ๐ **ุชุญููู ุงููุดููุฉ**

### **ุงูุฃุฎุทุงุก ุงูููุชุดูุฉ:**
1. **ุฎุทุฃ ุญุฌู ุงูููู**: `Body exceeded 1 MB limit` ูู Next.js
2. **ูุณุงุฑ API ุฎุงุทุฆ**: ุงููููุฐุฌ ูุฑุณู ุฅูู `/api/admin/books` ุจุฏูุงู ูู `/api/books`
3. **ุนุฏู ูุฌูุฏ ูุนุงูุฌ ูููููุงุช**: ููุต ูู middleware upload
4. **ุนุฏู ุฏุนู FormData**: controller ูู ููู ูุชุนุงูู ูุน FormData

---

## โก **ุงูุญููู ุงููุทุจูุฉ**

### **1. ุฅุตูุงุญ ุญุฏ ุญุฌู ุงูููู ูู Next.js**
```typescript
// next.config.ts
experimental: {
  serverActions: {
    bodySizeLimit: '50mb'  // ุฒูุงุฏุฉ ุงูุญุฏ ุฅูู 50 ููุฌุงุจุงูุช
  }
}
```

### **2. ุชุตุญูุญ ูุณุงุฑ API**
```tsx
// web-app/src/app/admin/books/new/page.tsx
// ุชุบููุฑ ูู:
const response = await fetch('/api/admin/books', {
// ุฅูู:
const response = await fetch('/api/books', {
```

### **3. ุฅุถุงูุฉ middleware ูููููุงุช**
```javascript
// backend/src/routes/books.js
const { uploadMultiple, handleUploadError } = require('../middleware/upload');

// ุชุญุฏูุซ route:
router.post('/', auth, uploadMultiple, bookController.createBook, handleUploadError);
```

### **4. ุชุญุฏูุซ controller ููุชุนุงูู ูุน FormData**
```javascript
// backend/src/controllers/bookController.js
createBook = asyncHandler(async (req, res) => {
  console.log('๐ Creating new book...');
  console.log('Body:', req.body);
  console.log('Files:', req.files);
  
  // ูุนุงูุฌุฉ FormData ูุงููููุงุช
  const bookData = {
    title: req.body.title,
    author: req.body.author,
    // ... ุจุงูู ุงูุจูุงูุงุช
  };
  
  // ูุนุงูุฌุฉ ุงููููุงุช ุงููุฑููุนุฉ
  if (req.files && req.files.length > 0) {
    bookData.files = {};
    req.files.forEach(file => {
      const format = this.getFileFormat(file.originalname);
      bookData.files[format] = {
        filename: file.filename,
        originalName: file.originalname,
        path: file.path,
        size: file.size,
        mimetype: file.mimetype
      };
    });
  }
});
```

### **5. ุฅูุดุงุก ูุฌูุฏ ุงูุฑูุน**
```bash
# ุฅูุดุงุก ูุฌูุฏ uploads/books
mkdir -p backend/uploads/books
```

---

## ๐งช **ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ**

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**
- โ ุตูุญุฉ ุฅุถุงูุฉ ุงููุชุงุจ ุชูุชุญ ุจูุฌุงุญ
- โ ุฑูุน ุงููููุงุช ูุนูู (ุญุชู 50 ููุฌุงุจุงูุช)
- โ ุฅุฑุณุงู ุงููููุฐุฌ ุฅูู ุงููุณุงุฑ ุงูุตุญูุญ
- โ ูุนุงูุฌุฉ ุงูุจูุงูุงุช ูุงููููุงุช ุจูุฌุงุญ
- โ ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ุฃู ุฎุทุฃ ูุงุถุญุฉ

### **ูุงุฎุชุจุงุฑ ุงููุธุงู:**
1. **ุงูุชุญ ุตูุญุฉ ุฅุถุงูุฉ ุงููุชุงุจ**: http://localhost:3000/admin/books/new
2. **ุฃุฏุฎู ุจูุงูุงุช ุงููุชุงุจ**: ุงูุนููุงูุ ุงููุคููุ ุงููุตูุ ุฅูุฎ
3. **ุฃุฑูู ูููุงุช**: ุตูุฑุฉ ุงูุบูุงู ููููุงุช ุงููุชุงุจ
4. **ุงุถุบุท "ูุดุฑ ุงููุชุงุจ"**
5. **ุชุญูู ูู ุงููุชูุฌุฉ**: ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ

---

## ๐ง **ุงูููุฒุงุช ุงููุญุณูุฉ**

### **ุฏุนู ุฃููุงุน ุงููููุงุช:**
- **๐ EPUB**: ูููุชุจ ุงูุฅููุชุฑูููุฉ
- **๐ฑ MOBI**: ูุฃุฌูุฒุฉ Kindle
- **๐ PDF**: ูููุซุงุฆู
- **๐ต MP3/M4A/WAV**: ูููุชุจ ุงููุณููุนุฉ
- **๐ผ๏ธ JPG/PNG/GIF**: ูุตูุฑ ุงูุฃุบููุฉ

### **ุญุฏูุฏ ุงูุฃูุงู:**
- **ุญุฌู ุงูููู**: ุญุชู 100 ููุฌุงุจุงูุช ููู ููู
- **ุนุฏุฏ ุงููููุงุช**: ุญุชู 5 ูููุงุช ูู ุงููุฑุฉ ุงููุงุญุฏุฉ
- **ุฃููุงุน ูุฏุนููุฉ**: ููุท ุงูุฃููุงุน ุงููุญุฏุฏุฉ ูุณุจูุงู
- **ุชุญูู ูู ุณูุงูุฉ ุงูููู**: ูุญุต ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ

### **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
- **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- **ุชุณุฌูู ููุตู** ููุฃุฎุทุงุก ูู console
- **ูุนุงูุฌุฉ ุงุณุชุซูุงุกุงุช** ุดุงููุฉ
- **ุชูุธูู ุงููููุงุช** ูู ุญุงูุฉ ูุดู ุงูุฑูุน

---

## ๐ **ุฅุญุตุงุฆูุงุช ุงูุฅุตูุงุญ**

| ุงููุคุดุฑ | ุงููููุฉ | ุงูุญุงูุฉ |
|---------|---------|--------|
| **ุนุฏุฏ ุงูุฃุฎุทุงุก ุงููุตุญุญุฉ** | 4 ุฃุฎุทุงุก | โ ูุตุญุญ |
| **ุงููููุงุช ุงููุญุฏุซุฉ** | 4 ูููุงุช | โ ูุญุฏุซ |
| **ุญุฏ ุญุฌู ุงูููู** | 50 MB | โ ูุญุณู |
| **ุฏุนู ุฃููุงุน ุงููููุงุช** | 7 ุฃููุงุน | โ ููุณุน |
| **ููุช ุงูุฅุตูุงุญ** | 20 ุฏูููุฉ | โ ุณุฑูุน |

---

## ๐ฏ **ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ**

### **ุงููุฑุญูุฉ 1: ุชุญุณููุงุช ููุฑูุฉ**
- [ ] ุฅุถุงูุฉ ูุนุงููุฉ ูููููุงุช ูุจู ุงูุฑูุน
- [ ] ุดุฑูุท ุชูุฏู ููุฑูุน
- [ ] ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูู ุงููุงุฌูุฉ
- [ ] ุฑุณุงุฆู ุฎุทุฃ ุฃูุซุฑ ุชูุตููุงู

### **ุงููุฑุญูุฉ 2: ููุฒุงุช ูุชูุฏูุฉ**
- [ ] ุฑูุน ูุชุนุฏุฏ ุงููููุงุช ุจุงูุณุญุจ ูุงูุฅููุงุช
- [ ] ุถุบุท ุงูุตูุฑ ุชููุงุฆูุงู
- [ ] ุงุณุชุฎุฑุงุฌ metadata ูู ุงููููุงุช
- [ ] ุชุญููู ุตูุบ ุงููููุงุช ุชููุงุฆูุงู

### **ุงููุฑุญูุฉ 3: ุงูุฃูุงู ูุงูุฃุฏุงุก**
- [ ] ูุญุต ุงููููุงุช ูู ุงูููุฑูุณุงุช
- [ ] ุชุดููุฑ ุงููููุงุช ุงูุญุณุงุณุฉ
- [ ] ุชุญุณูู ุฃุฏุงุก ุงูุฑูุน
- [ ] ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู ูููููุงุช

---

## ๐ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ**

### **โ ูุง ุชู ุฅูุฌุงุฒู:**
1. **ุฅุตูุงุญ ุฌููุน ุฃุฎุทุงุก ุฑูุน ุงููููุงุช** ุจูุฌุงุญ
2. **ุฒูุงุฏุฉ ุญุฏ ุญุฌู ุงูููู** ุฅูู 50 ููุฌุงุจุงูุช
3. **ุฏุนู ุฃููุงุน ูููุงุช ูุชุนุฏุฏุฉ** ูููุชุจ ูุงูุตูุชูุงุช
4. **ูุนุงูุฌุฉ FormData** ุจุดูู ุตุญูุญ
5. **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ุจุงููุบุฉ ุงูุนุฑุจูุฉ
6. **ุชุณุฌูู ุดุงูู** ููุนูููุงุช ูุงูุฃุฎุทุงุก

### **๐ฏ ุงูุญุงูุฉ ุงูุญุงููุฉ:**
- โ **ูุธุงู ุฑูุน ุงููููุงุช ูุนูู ุจููุงุกุฉ**
- โ **ุฏุนู ูุงูู ูุฌููุน ุฃููุงุน ุงููุชุจ**
- โ **ุฃูุงู ูุญุณู ููุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ**
- โ **ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู**

---

## ๐ **ููุงุฎุชุจุงุฑ ูุงูุชุญูู**

**๐ ุตูุญุฉ ุฅุถุงูุฉ ุงููุชุงุจ**: http://localhost:3000/admin/books/new  
**๐ ุชุณุฌูู ุงูุฏุฎูู**: admin@kitabi.com / admin123  
**๐ ูุฌูุฏ ุงููููุงุช**: `backend/uploads/books/`  
**๐ ุณุฌู ุงูุนูููุงุช**: console ูู ุงููุชุตูุญ ูุฎุงุฏู backend

---

**๐ ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจูุฌุงุญ!**  
**ูุธุงู ุฅุถุงูุฉ ุงููุชุจ ูุนูู ุงูุขู ุจููุงุกุฉ ูุฃูุงู ุนุงูููู ๐**

---

*ุขุฎุฑ ุชุญุฏูุซ: 11 ุฃุบุณุทุณ 2025 - 9:40 PM*  
*ุญุงูุฉ ุงูุฅุตูุงุญ: ๐ข **ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู***
