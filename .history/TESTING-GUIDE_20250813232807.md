# 🧪 دليل اختبار نظام كتابي

## خطوات التحقق من إضافة كتاب "العدمية"

### 1. 🔐 تسجيل الدخول
```
الرابط: http://localhost:3000
الحساب: developer@test.com
كلمة المرور: 123456
```

### 2. 🔍 فحص الكتب المحفوظة
```
الرابط: http://localhost:3000/test-books.html
- اضغط "فحص الكتب" لرؤية جميع الكتب
- اضغط "البحث عن العدمية" للبحث المحدد
```

### 3. ➕ إضافة كتاب جديد
1. انتقل للصفحة الرئيسية
2. اضغط على "إضافة كتاب" أو "رفع كتاب"
3. املأ البيانات:
   - **العنوان**: العدمية
   - **المؤلف**: سارتر أو نيتشه
   - **النوع**: فلسفة
   - **اللغة**: العربية
4. ارفع ملف نصي أو أي ملف
5. اضغط "رفع الكتاب"

### 4. 📚 التحقق من المكتبة
1. انتقل لتبويب "المكتبة"
2. ابحث عن الكتب المضافة حديثاً
3. ستجد الكتب المحلية مميزة بعلامة "📚 كتاب محلي"

### 5. 📖 اختبار القراءة
1. اضغط زر "قراءة" على أي كتاب محلي
2. سيفتح القارئ الإلكتروني
3. جرب الميزات:
   - تغيير حجم الخط
   - الوضع المظلم
   - البحث في النص
   - الإشارات المرجعية

## 🔧 أدوات التشخيص

### أ. صفحة اختبار الكتب
```
http://localhost:3000/test-books.html
```
**الوظائف المتاحة:**
- 🔍 فحص جميع الكتب المحفوظة
- 🔎 البحث عن كتاب العدمية تحديداً
- ➕ إضافة كتاب تجريبي للاختبار
- 🗑️ مسح جميع الكتب المحفوظة

### ب. وحدة التحكم في المتصفح
اضغط F12 وفي Console اكتب:
```javascript
// عرض جميع الكتب المحفوظة
JSON.parse(localStorage.getItem('kitabi_local_books') || '[]')

// البحث عن العدمية
JSON.parse(localStorage.getItem('kitabi_local_books') || '[]')
  .filter(book => book.title.includes('العدمية'))

// إحصائيات سريعة
const books = JSON.parse(localStorage.getItem('kitabi_local_books') || '[]');
console.log(`عدد الكتب: ${books.length}`);
```

## 🎯 حالات الاختبار

### ✅ حالة النجاح المتوقعة
1. **الإضافة**: يظهر تقدم الرفع وينتهي بـ "تم إضافة X كتاب بنجاح!"
2. **العرض**: يظهر الكتاب في المكتبة مع علامة "كتاب محلي"
3. **الفلترة**: يمكن العثور على الكتاب بالبحث والفلترة
4. **القراءة**: يفتح القارئ ويعرض محتوى الكتاب

### ⚠️ مشاكل محتملة وحلولها

#### مشكلة: "لا توجد كتب محفوظة"
**الحل:**
1. تأكد من تسجيل الدخول
2. جرب إضافة كتاب تجريبي من صفحة الاختبار
3. تأكد من السماح بـ localStorage في المتصفح

#### مشكلة: "فشل في رفع الكتاب"
**الحل:**
1. تحقق من حجم الملف (أقل من 50MB)
2. تأكد من ملء العنوان والمؤلف
3. جرب صيغة ملف مختلفة (txt, pdf, epub)

#### مشكلة: "لا يفتح القارئ"
**الحل:**
1. تحقق من وجود البيانات في localStorage
2. جرب تحديث الصفحة
3. تأكد من أن المتصفح يدعم FileReader API

## 📊 التحقق من النجاح

### مؤشرات النجاح:
1. ✅ **في الصفحة الرئيسية**: تزيد إحصائية "كتاب" مع ملاحظة "+X محلي"
2. ✅ **في المكتبة**: يظهر الكتاب مع تاج "📚 كتاب محلي"
3. ✅ **في صفحة الاختبار**: يظهر الكتاب في قائمة الكتب المحفوظة
4. ✅ **في القارئ**: يفتح محتوى الكتاب بالميزات الكاملة

### علامات المشاكل:
1. ❌ رسائل خطأ في وحدة التحكم
2. ❌ عدم ظهور الكتاب في المكتبة
3. ❌ فشل في فتح القارئ
4. ❌ localStorage فارغ أو معطل

---

## 🚀 اختبار سريع في 3 خطوات

1. **افتح**: http://localhost:3000/test-books.html
2. **اضغط**: "إضافة كتاب تجريبي"
3. **تحقق**: "البحث عن العدمية"

إذا ظهر الكتاب، فالنظام يعمل بنجاح! 🎉
